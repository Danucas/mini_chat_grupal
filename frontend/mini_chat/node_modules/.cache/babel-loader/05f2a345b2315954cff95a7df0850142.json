{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/Login.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './Login.module.css';\nimport ChatRoom from './ChatRoom';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.rootRef = /*#__PURE__*/React.createRef();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: this.rootRef,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.form,\n        autoComplete: \"off\",\n        action: \"/api-token-auth/\",\n        method: \"post\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Member Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: styles['form-control'],\n            name: \"username\",\n            id: \"username\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"Enter email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            id: \"emailHelp\",\n            className: [styles['form-text'], styles['text-muted']],\n            children: \"We'll never share your email with anyone else.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 19,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: styles['form-control'],\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group form-check'],\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: styles['form-check-label'],\n            htmlFor: \"exampleCheck1\",\n            children: \"Check me out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            className: styles['form-check-input'],\n            id: \"exampleCheck1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles['btn btn-primary'],\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['link'],\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/register\",\n            children: \"I don't have an account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 4\n    }, this);\n  }\n\n  componentDidMount() {\n    console.log(styles.error);\n    const root = this.rootRef;\n    const inputs = root.current.querySelectorAll('input');\n\n    for (const inp of inputs) {\n      inp.addEventListener('input', function () {\n        const err = root.current.querySelector(`.${styles.error}`);\n        err.innerHTML = '';\n      });\n    }\n\n    const linkToRegister = root.current.querySelector(`.${styles.link}`);\n    root.current.querySelector('form').addEventListener('submit', async function (evn) {\n      evn.preventDefault();\n      console.log('request for token');\n      const data = new FormData(evn.target);\n      const credentials = {};\n\n      for (const key of data.keys()) {\n        credentials[key] = data.get(key);\n      }\n\n      console.log(credentials);\n      const req = await fetch(`http://localhost:8000/api-token-auth/`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n\n      if (req.status === 200) {\n        const res = await req.json();\n        localStorage.setItem('token', res.token);\n        localStorage.setItem('user_id', res.id);\n        ReactDOM.render( /*#__PURE__*/_jsxDEV(ChatRoom, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 6\n        }, this), document.getElementById('root'));\n      } else if (req.status === 404) {\n        console.log('Error generating token', await req.json());\n        const error = root.current.querySelector(`.${styles.error}`);\n        error.innerHTML = 'Wrong user or password';\n        evn.target.reset();\n      } else {\n        console.log('User or password wrong');\n        const error = root.current.querySelector(`.${styles.error}`);\n        error.innerHTML = 'Wrong user or password';\n        evn.target.reset();\n      }\n    });\n  }\n\n}\nexport class Register extends Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.form,\n      autocomplete: \"off\",\n      action: \"/register/\",\n      method: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Member Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles['form-group'],\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: styles['form-control'],\n          name: \"username\",\n          id: \"username\",\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"Enter email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          id: \"emailHelp\",\n          className: [styles['form-text'], styles['text-muted']],\n          children: \"We'll never share your email with anyone else.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: styles['error']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles['form-group'],\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: styles['form-control'],\n          name: \"password\",\n          id: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles['form-group'],\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: styles['form-control'],\n          name: \"confirm\",\n          id: \"confirm\",\n          placeholder: \"Confirm your Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        class: \"btn btn-primary\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles['link'],\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/login\",\n          children: \"I have an account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }, this);\n  }\n\n  componentDidMount() {\n    document.querySelector('form').style.display = 'block';\n    const inputs = document.querySelectorAll('input');\n\n    for (const inp of inputs) {\n      inp.addEventListener('input', function () {\n        const err = document.querySelector('.error');\n        err.innerHTML = '';\n      });\n    }\n\n    document.querySelector('form').addEventListener('submit', async function (evn) {\n      evn.preventDefault();\n      console.log('request for token');\n      const data = new FormData(evn.target);\n      const credentials = {};\n\n      for (const key of data.keys()) {\n        credentials[key] = data.get(key);\n      }\n\n      console.log(credentials);\n\n      if (credentials.password === credentials.confirm) {\n        const req = await fetch(`http://localhost:8000/register/`, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(credentials)\n        });\n\n        if (req.status === 200) {\n          const res = await req.json();\n          localStorage.setItem('token', res.token);\n          window.location.replace('/dashboard');\n        } else {\n          const err = document.querySelector('.error');\n          err.innerHTML = 'Please try with another data';\n        }\n      } else {\n        const err = document.querySelector('.error');\n        err.innerHTML = 'The passwords should match';\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/Login.js"],"names":["React","Component","ReactDOM","styles","ChatRoom","Login","constructor","props","rootRef","createRef","render","form","error","componentDidMount","console","log","root","inputs","current","querySelectorAll","inp","addEventListener","err","querySelector","innerHTML","linkToRegister","link","evn","preventDefault","data","FormData","target","credentials","key","keys","get","req","fetch","method","headers","body","JSON","stringify","status","res","json","localStorage","setItem","token","id","document","getElementById","reset","Register","style","display","password","confirm","window","location","replace"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './Login.module.css';\nimport ChatRoom from './ChatRoom';\n\nexport default class Login extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.rootRef = React.createRef();\n\t}\n\trender () {\n\t\treturn(\n\t\t\t<div ref={ this.rootRef }>\n\t\t\t\t<form className={ styles.form } autoComplete=\"off\" action=\"/api-token-auth/\" method=\"post\">\n\t\t\t\t\t<h1>Member Login</h1>\n\t\t\t\t\t<h2 className={ styles.error }></h2>\n\t\t\t\t\t<div className={ styles['form-group'] }>\n\t\t\t\t\t\t<input type=\"text\" className={ styles['form-control'] } name=\"username\" id=\"username\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\"></input>\n\t\t\t\t\t\t<small id=\"emailHelp\" className={ [styles['form-text'], styles['text-muted']] }>We'll never share your email with anyone else.</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group'] }>\n\t\t\t\t\t<input type=\"password\" className={ styles['form-control'] } name=\"password\" id=\"password\" placeholder=\"Password\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group form-check'] }>\n\t\t\t\t\t\t<label className={ styles['form-check-label'] } htmlFor=\"exampleCheck1\">Check me out</label>\n\t\t\t\t\t\t<input type=\"checkbox\" className={ styles['form-check-input'] } id=\"exampleCheck1\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"submit\" className={ styles['btn btn-primary'] }>Submit</button>\n\t\t\t\t\t<div className={ styles['link'] }>\n\t\t\t\t\t\t<a href=\"/register\">I don't have an account</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount () {\n\t\tconsole.log(styles.error);\n\t\tconst root = this.rootRef;\n\t\tconst inputs = root.current.querySelectorAll('input');\n\t\tfor (const inp of inputs) {\n\t\t\tinp.addEventListener('input', function () {\n\t\t\t\tconst err = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terr.innerHTML = '';\n\t\t\t});\n\t\t}\n\t\tconst linkToRegister = root.current.querySelector(`.${styles.link}`);\n\t\troot.current.querySelector('form').addEventListener('submit', async function (evn) {\n\t\t\tevn.preventDefault();\n\t\t\tconsole.log('request for token');\n\t\t\tconst data = new FormData(evn.target);\n\t\t\tconst credentials = {};\n\t\t\tfor (const key of data.keys()) {\n\t\t\t\tcredentials[key] = data.get(key);\n\t\t\t}\n\t\t\tconsole.log(credentials);\n\t\t\tconst req = await fetch(\n\t\t\t\t`http://localhost:8000/api-token-auth/`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(credentials)\n\t\t\t\t}\n\t\t\t)\n\t\t\tif (req.status === 200) {\n\t\t\t\tconst res = await req.json();\n\t\t\t\tlocalStorage.setItem('token', res.token);\n\t\t\t\tlocalStorage.setItem('user_id', res.id);\n\t\t\t\tReactDOM.render(\n\t\t\t\t\t<ChatRoom></ChatRoom>,\n\t\t\t\t\tdocument.getElementById('root')\n\t\t\t\t);\n\t\t\t} else if (req.status === 404) {\n\t\t\t\tconsole.log('Error generating token', await req.json());\n\t\t\t\tconst error = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terror.innerHTML = 'Wrong user or password';\n\t\t\t\tevn.target.reset();\n\t\t\t} else {\n\t\t\t\tconsole.log('User or password wrong');\n\t\t\t\tconst error = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terror.innerHTML = 'Wrong user or password';\n\t\t\t\tevn.target.reset();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class Register extends Component {\n\trender () {\n\t\treturn(\n\t\t\t<form className={ styles.form } autocomplete=\"off\" action=\"/register/\" method=\"post\">\n\t\t\t\t<h1>Member Register</h1>\n\t\t\t\t<div className={ styles.['form-group'] }>\n\t\t\t\t<input type=\"email\" className={ styles['form-control']} name=\"username\" id=\"username\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\"></input>\n\t\t\t\t<small id=\"emailHelp\" className={ [styles['form-text'], styles['text-muted']]} >We'll never share your email with anyone else.</small>\n\t\t\t\t</div>\n\t\t\t\t<h2 className={ styles.['error']}></h2>\n\t\t\t\t<div className={ styles.['form-group']}>\n\t\t\t\t<input type=\"password\" className={ styles['form-control']} name=\"password\" id=\"password\" placeholder=\"Password\"></input>\n\t\t\t\t</div>\n\t\t\t\t<div className={ styles.['form-group']}>\n\t\t\t\t\t<input type=\"password\" className={ styles['form-control']} name=\"confirm\" id=\"confirm\" placeholder=\"Confirm your Password\"></input>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n\t\t\t\t<div className={ styles.['link']}>\n\t\t\t\t\t<a href=\"/login\">I have an account</a>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t);\n\t}\n\tcomponentDidMount () {\n\t\tdocument.querySelector('form').style.display = 'block';\n\t\tconst inputs = document.querySelectorAll('input');\n\t\tfor (const inp of inputs) {\n\t\t\tinp.addEventListener('input', function () {\n\t\t\t\tconst err = document.querySelector('.error');\n\t\t\t\terr.innerHTML = '';\n\t\t\t});\n\t\t}\n\t\tdocument.querySelector('form').addEventListener('submit', async function (evn) {\n\t\t\tevn.preventDefault();\n\t\t\tconsole.log('request for token');\n\t\t\tconst data = new FormData(evn.target);\n\t\t\tconst credentials = {};\n\t\t\tfor (const key of data.keys()) {\n\t\t\t\tcredentials[key] = data.get(key);\n\t\t\t}\n\t\t\tconsole.log(credentials);\n\t\t\tif (credentials.password === credentials.confirm) {\n\t\t\t\tconst req = await fetch(\n\t\t\t\t\t`http://localhost:8000/register/`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify(credentials)\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tif (req.status === 200) {\n\t\t\t\t\tconst res = await req.json();\n\t\t\t\t\tlocalStorage.setItem('token', res.token);\n\t\t\t\t\twindow.location.replace('/dashboard');\n\t\t\t\t} else {\n\t\t\t\t\tconst err = document.querySelector('.error');\n\t\t\t\t\terr.innerHTML = 'Please try with another data';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst err = document.querySelector('.error');\n\t\t\t\terr.innerHTML = 'The passwords should match';\n\t\t\t}\n\t\t});\n\t}\n}"]},"metadata":{},"sourceType":"module"}