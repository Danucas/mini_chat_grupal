{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/ChatRoom.js\";\nimport React, { Component } from 'react';\nimport ReactDOM, { unmountComponentAtNode } from 'react-dom';\nimport styles from './ChatRoom.module.css';\nexport default class ChatRoom extends Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Hello\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 4\n    }, this);\n  }\n\n} // let roomId = 'undefined';\n// let imgB64String;\n// window.onload = function () {\n// \tconst logout = document.querySelector('.logout');\n// \tlogout.addEventListener('click', function () {\n// \t\twindow.location.replace('/login');\n// \t});\n// \tconst addRoom = document.querySelector('#rooms button');\n// \taddRoom.addEventListener('click', async function (evn) {\n// \t\tcreateRoom();\n// \t});\n// \tconst changeRoom = document.querySelector('.change_room');\n// \tconst deleteRoombtn = document.querySelector('.delete_room');\n// \tconst nameRoombtn = document.querySelector('.room_name');\n// \tchangeRoom.addEventListener('click', async function () {\n// \t\trenderRooms(await getRooms());\n// \t\tdocument.querySelector('#users').style.display = 'none';\n// \t\tdocument.querySelector('#chat').style.display = 'none';\n// \t\tchangeRoom.style.display = 'none';\n// \t\tdeleteRoombtn.style.display = 'none';\n// \t\tnameRoombtn.style.display = 'none';\n// \t});\n// \tdeleteRoombtn.addEventListener('click', async function () {\n// \t\tconst conf = confirm('Are you sure about deleting this Room?');\n// \t\tif (conf) {\n// \t\t\tawait deleteRoom();\n// \t\t\tawait renderRooms(await getRooms());\n// \t\t\tdocument.querySelector('#users').style.display = 'none';\n// \t\t\tdocument.querySelector('#chat').style.display = 'none';\n// \t\t\tchangeRoom.style.display = 'none';\n// \t\t\tdeleteRoombtn.style.display = 'none';\n// \t\t\tnameRoombtn.style.display = 'none';\n// \t\t}\n// \t});\n// \tnameRoombtn.querySelector('h1').addEventListener('click', function (evn) {\n// \t\tnameRoombtn.querySelector('input').style.display = 'block';\n// \t\tnameRoombtn.querySelector('input').value = evn.target.innerHTML;\n// \t\tnameRoombtn.querySelector('input').focus();\n// \t});\n// \tnameRoombtn.querySelector('input').addEventListener('keyup', async function (evn) {\n// \t\tif (evn.keyCode === 13) {\n// \t\t\tawait saveRoomName(evn.target.value);\n// \t\t\tevn.target.style.display = 'none';\n// \t\t\tnameRoombtn.querySelector('h1').innerHTML = evn.target.value;\n// \t\t\tevn.target.value = '';\n// \t\t\t// evn.target.blur();\n// \t\t}\n// \t});\n// \tnameRoombtn.querySelector('input').addEventListener('focusout', function (evn) {\n// \t\tevn.target.style.display = 'none';\n// \t});\n// \tsetRoomsListeners();\n// \tconst editor = document.querySelector('.edit_container');\n// \teditor.querySelector('button').addEventListener('click', async function () {\n// \t\tconst messageInput = editor.querySelector('textarea');\n// \t\tconsole.log(messageInput.value);\n// \t\tconsole.log('Send message');\n// \t\tif (messageInput.value !== '') {\n// \t\t\tawait sendMessage(messageInput.value);\n// \t\t\tmessageInput.value = '';\n// \t\t}\n// \t});\n// \teditor.querySelector('div').addEventListener('click', function (evn) {\n// \t\teditor.querySelector('input').click();\n// \t});\n// \teditor.querySelector('input').addEventListener('change', function (evn) {\n// \t\tif (evn.target.files && evn.target.files.length > 0) {\n// \t\t\tconst file = evn.target.files[0];\n// \t\t\trenderImageUploader(file, document.querySelector('.uploader img'));\n// \t\t}\n// \t\tevn.target.value = '';\n// \t\tdocument.querySelector('.uploader').style.display = 'block';\n// \t});\n// \tdocument.querySelector('.uploader h2').addEventListener('click', function () {\n// \t\tdocument.querySelector('.uploader').style.display = 'none';\n// \t});\n// \tdocument.querySelector('.uploader button').addEventListener('click', async function (evn) {\n// \t\tconsole.log('uploade image');\n// \t\tawait uploadImage('message');\n// \t\t// console.log(roomId);\n// \t\tloadMessages();\n// \t\tdocument.querySelector('.uploader').style.display = 'none';\n// \t});\n// \tconst profilePic = document.querySelector('.profile_pic');\n// \tprofilePic.addEventListener('mousemove', function () {\n// \t\tprofilePic.querySelector('.change_photo').style.display = 'block';\n// \t});\n// \tprofilePic.addEventListener('mouseleave', function () {\n// \t\tprofilePic.querySelector('.change_photo').style.display = 'none';\n// \t});\n// \tprofilePic.querySelector('.change_photo').addEventListener('click', function () {\n// \t\tprofilePic.querySelector('.change_photo input').click();\n// \t});\n// \tprofilePic.querySelector('.change_photo input').addEventListener('change', function (evn) {\n// \t\tif (evn.target.files && evn.target.files.length > 0) {\n// \t\t\tconst file = evn.target.files[0];\n// \t\t\trenderImageUploader(file, document.querySelector('.profile img'));\n// \t\t}\n// \t\tevn.target.value = '';\n// \t\tdocument.querySelector('.profile').style.display = 'block';\n// \t});\n// \tdocument.querySelector('.profile h2').addEventListener('click', function () {\n// \t\tdocument.querySelector('.profile').style.display = 'none';\n// \t});\n// \tdocument.querySelector('.profile button').addEventListener('click', async function (evn) {\n// \t\tconsole.log('uploade image');\n// \t\tawait uploadImage('profile');\n// \t\tfetchMedia('profile', {\n// \t\t\tobject: profilePic.querySelector('img'),\n// \t\t\tid: 0\n// \t\t})\n// \t\tif (roomId !== 'undefined') {\n// \t\t\tawait getUsers(roomId);\n// \t\t}\n// \t\tdocument.querySelector('.profile').style.display = 'none';\n// \t});\n// \tfetchMedia('profile', {\n// \t\tobject: profilePic.querySelector('img'),\n// \t\tid: 0\n// \t});\n// \tconst profileName = document.querySelector('.profile_name');\n// \tprofileName.querySelector('h1').addEventListener('click', function (evn) {\n// \t\tprofileName.querySelector('input').style.display = 'block';\n// \t\tprofileName.querySelector('input').value = evn.target.innerHTML;\n// \t\tprofileName.querySelector('input').focus();\n// \t});\n// \tprofileName.querySelector('input').addEventListener('keypress', async function (evn) {\n// \t\tif (evn.keyCode === 13) {\n// \t\t\tawait saveUsername(evn.target.value)\n// \t\t\tconsole.log('save username: ', evn.target.value);\n// \t\t\tevn.target.style.display = 'none';\n// \t\t\tprofileName.querySelector('h1').innerHTML = evn.target.value;\n// \t\t\tif (roomId != 'undefined') {\n// \t\t\t\tawait getUsers(roomId);\n// \t\t\t}\n// \t\t}\n// \t});\n// \tprofileName.querySelector('input').addEventListener('focusout', async function (evn) {\n// \t\tevn.target.style.display = 'none';\n// \t\tprofileName.querySelector('h1').innerHTML = evn.target.value;\n// \t\tawait saveUsername(evn.target.value)\n// \t});\n// }\n// async function saveUsername (username) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/users`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\t'username': username\n// \t\t\t})\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t}\n// }\n// async function createRoom () {\n// \tconsole.log(localStorage.getItem('token'));\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\trenderRoom(res.id, res.name);\n// \t}\n// }\n// async function saveRoomName (name) {\n// \tconsole.log(name);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tname: name,\n// \t\t\t\tid: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// }\n// async function getRooms () {\n// \tconsole.log('getRooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t\treturn res.rooms;\n// \t} else {\n// \t\tconsole.log(req);\n// \t\treturn {};\n// \t}\n// }\n// async function renderRooms (rooms) {\n// \tconsole.log(rooms);\n// \tconst roomsEl = document.getElementById('rooms');\n// \tconst ul = roomsEl.querySelector('ul');\n// \tul.innerHTML = '';\n// \tfor (const room of rooms) {\n// \t\tconst li = document.createElement('li');\n// \t\tli.setAttribute('room_id', room.id);\n// \t\tli.innerHTML = room.name;\n// \t\tul.appendChild(li);\n// \t}\n// \tsetTimeout(function () {\n// \t\troomsEl.style.display = 'block';\n// \t\tsetRoomsListeners();\n// \t}, 100);\n// }\n// async function deleteRoom () {\n// \tconsole.log('delete rooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t} else {\n// \t}\n// }\n// function setRoomsListeners () {\n// \tconst rooms = document.querySelectorAll('#rooms li');\n// \tfor (const room of rooms) {\n// \t\troom.addEventListener('click', function (evn) {\n// \t\t\trenderRoom(evn.target.getAttribute('room_id'), evn.target.innerHTML);\n// \t\t});\n// \t}\n// }\n// async function renderRoom (id, name) {\n// \troomId = id;\n// \tconst changeRoom = document.querySelector('.change_room');\n// \tchangeRoom.style.display = 'block';\n// \tconst deleteRoom = document.querySelector('.delete_room');\n// \tdeleteRoom.style.display = 'block';\n// \tconst nameRoom = document.querySelector('.room_name');\n// \tnameRoom.style.display = 'block';\n// \tconsole.log('Render room');\n// \tconsole.log(name)\n// \tdocument.querySelector('.room_name h1').innerHTML = name;\n// \tdocument.getElementById('rooms').style.display = 'none';\n// \tconsole.log(id);\n// \tawait getUsers(id);\n// \tdocument.getElementById('chat').style.display = 'block';\n// \tawait loadMessages();\n// }\n// async function uploadImage (type) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tdata: imgB64String,\n// \t\t\t\ttype: type,\n// \t\t\t\troomId: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \treturn res;\n// }\n// async function renderImageUploader (file, img) {\n// \tconst readHandler = async function (evn) {\n// \t\tlet data = '';\n// \t\tlet bytes = new Uint8Array(evn.target.result);\n// \t\tlet length = bytes.byteLength;\n// \t\tfor (let i = 0; i < length; i++) {\n// \t\t\tdata += String.fromCharCode(bytes[i])\n// \t\t}\n// \t\tdata = window.btoa(data);\n// \t\timgB64String = data;\n// \t\timg.src = `data:image/png;base64,${data}`;\n// \t}\n// \tlet r = new FileReader();\n// \tlet blob = file.slice(0, file.size);\n// \tr.onload = readHandler;\n// \tr.readAsArrayBuffer(blob);\n// }\n// async function sendMessage (message) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tcontent: message\n// \t\t\t})\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tloadMessages();\n// \t}\n// }\n// async function loadMessages () {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconsole.log(req.status);\n// \tconst res = await req.json();\n// \trenderMessages(res.messages, res.id);\n// \tconsole.log(res);\n// }\n// async function renderMessages (messages, id) {\n// \tconst ul = document.querySelector('#messages');\n// \tul.innerHTML = '';\n// \tconst first = document.createElement('li');\n// \tfirst.innerHTML = '<h1>Welcome and Hi!!, start talking with your peers</h1>';\n// \tfirst.classList.add('first');\n// \tul.appendChild(first);\n// \tfor (const message of messages) {\n// \t\tconst mId = message.id;\n// \t\tconst li = document.createElement('li');\n// \t\tlet menu = '';\n// \t\tlet mine = '';\n// \t\tlet owner = message.user\n// \t\tif (id === message.user_id) {\n// \t\t\tli.classList.add('mine');\n// \t\t\towner = 'me'\n// \t\t\tmenu = `\n// \t\t\t\t\t<div option=\"delete\"></div>\n// \t\t\t\t\t<div menu=\"message\">\n// \t\t\t\t\t\t<h1></h1>\n// \t\t\t\t\t\t<h2 user_id=\"${id}\">Delete Message</h2>\n// \t\t\t\t\t</div>`;\n// \t\t\tmine = 'mine';\n// \t\t}\n// \t\tlet media = '';\n// \t\tif (message.media) {\n// \t\t\tmedia = `<img>`\n// \t\t}\n// \t\tconst date = new Date(message.created_at).toISOString().split('T')[1].slice(0, 5);\n// \t\tli.innerHTML = `<div cont=\"message\">\n// \t\t\t\t\t${menu}\n// \t\t\t\t\t<h3>${owner}</h3>\n// \t\t\t\t\t${media}\n// \t\t\t\t\t<p>${message.content}</p>\n// \t\t\t\t\t<h4>${date}</h4>\n// \t\t\t\t\t</div>`;\n// \t\tif (id === message.user_id) {\n// \t\t\tconst optionBtn = li.querySelector('[option=\"delete\"]');\n// \t\t\toptionBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'block';\n// \t\t\t});\n// \t\t\tconst closeBtn = li.querySelector('[menu=\"message\"] h1');\n// \t\t\tcloseBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t\tconst deleteBtn = li.querySelector('[menu=\"message\"] h2');\n// \t\t\tdeleteBtn.addEventListener('click', function (evn) {\n// \t\t\t\tconst messageId = message.id;\n// \t\t\t\tconst conf = confirm('Are you sure about deleting this message?');\n// \t\t\t\tif (conf) {\n// \t\t\t\t\tremoveMessage(messageId);\n// \t\t\t\t} else {\n// \t\t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t\t}\n// \t\t\t\t// li.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t}\n// \t\tul.appendChild(li);\n// \t\tif (message.media) {\n// \t\t\tconst img = li.querySelector('img');\n// \t\t\tconst obj = {id: message.id, object: img};\n// \t\t\tawait fetchMedia('message', Object.assign({}, obj));\n// \t\t}\n// \t}\n// \tsetTimeout(function () {\n// \t\tconst lastIndex = ul.querySelectorAll('li').length - 1;\n// \t\tconst lastLi = ul.querySelectorAll('li')[lastIndex];\n// \t\t// console.log(lastLi.offsetTop, ul.scrollTop, ul.scrollHeight);\n// \t\tul.scrollTop = ul.scrollHeight;\n// \t}, 200);\n// \t// lastLi.scrollTop = ul.scrollHeight;\n// \t// ul.scrollTop = ul.scrollHeight;\n// \t// lastLi.focus();\n// \t// lastLi.scrollIntoView(false);\n// }\n// async function fetchMedia (type, obj) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/${obj.id}?type=${type}`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.blob();\n// \tobj.object.src = window.URL.createObjectURL(res);\n// \t// console.log(res);\n// }\n// async function removeMessage (messageId) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/messages/${messageId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tloadMessages();\n// }\n// async function getUsers (id) {\n// \tconsole.log(id);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${id}/users`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tdocument.getElementById('users').style.display = 'block';\n// \trenderUsers(res.users);\n// }\n// function renderUsers (users) {\n// \tconst cont = document.querySelector('#users ul');\n// \tcont.innerHTML = '';\n// \tfor (const user of users) {\n// \t\tconst li = document.createElement('li');\n// \t\tconst time = `${user.last_login.split('T')[1].split('.')[0]}`;\n// \t\tconst date = `${user.last_login.split('T')[0]}`;\n// \t\tli.innerHTML = `<img><h1>${user.username}</h1><h2>Last login: ${time} / ${date}</h2>`;\n// \t\tcont.appendChild(li);\n// \t\tfetchMedia('profile', {\n// \t\t\tobject: li.querySelector('img'),\n// \t\t\tid: user.id\n// \t\t})\n// \t}\n// }","map":{"version":3,"sources":["/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/ChatRoom.js"],"names":["React","Component","ReactDOM","unmountComponentAtNode","styles","ChatRoom","render"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,IAAmBC,sBAAnB,QAAiD,WAAjD;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AAEA,eAAe,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAC/CK,EAAAA,MAAM,GAAI;AACT,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AAGA;;AAL8C,C,CAkBhD;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM, { unmountComponentAtNode } from 'react-dom';\nimport styles from './ChatRoom.module.css';\n\nexport default class ChatRoom extends Component {\n\trender () {\n\t\treturn(\n\t\t\t<h1>Hello</h1>\n\t\t);\n\t}\n}\n\n\n\n\n\n\n\n\n\n\n\n// let roomId = 'undefined';\n// let imgB64String;\n// window.onload = function () {\n\t\n// \tconst logout = document.querySelector('.logout');\n// \tlogout.addEventListener('click', function () {\n// \t\twindow.location.replace('/login');\n// \t});\n// \tconst addRoom = document.querySelector('#rooms button');\n// \taddRoom.addEventListener('click', async function (evn) {\n// \t\tcreateRoom();\n// \t});\n// \tconst changeRoom = document.querySelector('.change_room');\n// \tconst deleteRoombtn = document.querySelector('.delete_room');\n// \tconst nameRoombtn = document.querySelector('.room_name');\n// \tchangeRoom.addEventListener('click', async function () {\n// \t\trenderRooms(await getRooms());\n// \t\tdocument.querySelector('#users').style.display = 'none';\n// \t\tdocument.querySelector('#chat').style.display = 'none';\n// \t\tchangeRoom.style.display = 'none';\n// \t\tdeleteRoombtn.style.display = 'none';\n// \t\tnameRoombtn.style.display = 'none';\n// \t});\n// \tdeleteRoombtn.addEventListener('click', async function () {\n// \t\tconst conf = confirm('Are you sure about deleting this Room?');\n// \t\tif (conf) {\n// \t\t\tawait deleteRoom();\n// \t\t\tawait renderRooms(await getRooms());\n// \t\t\tdocument.querySelector('#users').style.display = 'none';\n// \t\t\tdocument.querySelector('#chat').style.display = 'none';\n// \t\t\tchangeRoom.style.display = 'none';\n// \t\t\tdeleteRoombtn.style.display = 'none';\n// \t\t\tnameRoombtn.style.display = 'none';\n// \t\t}\n// \t});\n// \tnameRoombtn.querySelector('h1').addEventListener('click', function (evn) {\n// \t\tnameRoombtn.querySelector('input').style.display = 'block';\n// \t\tnameRoombtn.querySelector('input').value = evn.target.innerHTML;\n// \t\tnameRoombtn.querySelector('input').focus();\n// \t});\n// \tnameRoombtn.querySelector('input').addEventListener('keyup', async function (evn) {\n// \t\tif (evn.keyCode === 13) {\n// \t\t\tawait saveRoomName(evn.target.value);\n// \t\t\tevn.target.style.display = 'none';\n// \t\t\tnameRoombtn.querySelector('h1').innerHTML = evn.target.value;\n// \t\t\tevn.target.value = '';\n// \t\t\t// evn.target.blur();\n// \t\t}\n// \t});\n// \tnameRoombtn.querySelector('input').addEventListener('focusout', function (evn) {\n// \t\tevn.target.style.display = 'none';\n// \t});\n// \tsetRoomsListeners();\n// \tconst editor = document.querySelector('.edit_container');\n// \teditor.querySelector('button').addEventListener('click', async function () {\n// \t\tconst messageInput = editor.querySelector('textarea');\n// \t\tconsole.log(messageInput.value);\n// \t\tconsole.log('Send message');\n// \t\tif (messageInput.value !== '') {\n// \t\t\tawait sendMessage(messageInput.value);\n// \t\t\tmessageInput.value = '';\n// \t\t}\n// \t});\n// \teditor.querySelector('div').addEventListener('click', function (evn) {\n// \t\teditor.querySelector('input').click();\n// \t});\n// \teditor.querySelector('input').addEventListener('change', function (evn) {\n// \t\tif (evn.target.files && evn.target.files.length > 0) {\n// \t\t\tconst file = evn.target.files[0];\n// \t\t\trenderImageUploader(file, document.querySelector('.uploader img'));\n// \t\t}\n// \t\tevn.target.value = '';\n// \t\tdocument.querySelector('.uploader').style.display = 'block';\n// \t});\n// \tdocument.querySelector('.uploader h2').addEventListener('click', function () {\n// \t\tdocument.querySelector('.uploader').style.display = 'none';\n// \t});\n// \tdocument.querySelector('.uploader button').addEventListener('click', async function (evn) {\n// \t\tconsole.log('uploade image');\n// \t\tawait uploadImage('message');\n// \t\t// console.log(roomId);\n// \t\tloadMessages();\n// \t\tdocument.querySelector('.uploader').style.display = 'none';\n// \t});\n// \tconst profilePic = document.querySelector('.profile_pic');\n// \tprofilePic.addEventListener('mousemove', function () {\n// \t\tprofilePic.querySelector('.change_photo').style.display = 'block';\n// \t});\n// \tprofilePic.addEventListener('mouseleave', function () {\n// \t\tprofilePic.querySelector('.change_photo').style.display = 'none';\n// \t});\n// \tprofilePic.querySelector('.change_photo').addEventListener('click', function () {\n// \t\tprofilePic.querySelector('.change_photo input').click();\n// \t});\n// \tprofilePic.querySelector('.change_photo input').addEventListener('change', function (evn) {\n// \t\tif (evn.target.files && evn.target.files.length > 0) {\n// \t\t\tconst file = evn.target.files[0];\n// \t\t\trenderImageUploader(file, document.querySelector('.profile img'));\n// \t\t}\n// \t\tevn.target.value = '';\n// \t\tdocument.querySelector('.profile').style.display = 'block';\n// \t});\n// \tdocument.querySelector('.profile h2').addEventListener('click', function () {\n// \t\tdocument.querySelector('.profile').style.display = 'none';\n// \t});\n// \tdocument.querySelector('.profile button').addEventListener('click', async function (evn) {\n// \t\tconsole.log('uploade image');\n// \t\tawait uploadImage('profile');\n// \t\tfetchMedia('profile', {\n// \t\t\tobject: profilePic.querySelector('img'),\n// \t\t\tid: 0\n// \t\t})\n// \t\tif (roomId !== 'undefined') {\n// \t\t\tawait getUsers(roomId);\n// \t\t}\n// \t\tdocument.querySelector('.profile').style.display = 'none';\n// \t});\n// \tfetchMedia('profile', {\n// \t\tobject: profilePic.querySelector('img'),\n// \t\tid: 0\n// \t});\n// \tconst profileName = document.querySelector('.profile_name');\n// \tprofileName.querySelector('h1').addEventListener('click', function (evn) {\n// \t\tprofileName.querySelector('input').style.display = 'block';\n// \t\tprofileName.querySelector('input').value = evn.target.innerHTML;\n// \t\tprofileName.querySelector('input').focus();\n// \t});\n// \tprofileName.querySelector('input').addEventListener('keypress', async function (evn) {\n// \t\tif (evn.keyCode === 13) {\n// \t\t\tawait saveUsername(evn.target.value)\n// \t\t\tconsole.log('save username: ', evn.target.value);\n// \t\t\tevn.target.style.display = 'none';\n// \t\t\tprofileName.querySelector('h1').innerHTML = evn.target.value;\n// \t\t\tif (roomId != 'undefined') {\n// \t\t\t\tawait getUsers(roomId);\n// \t\t\t}\n\n// \t\t}\n// \t});\n// \tprofileName.querySelector('input').addEventListener('focusout', async function (evn) {\n// \t\tevn.target.style.display = 'none';\n// \t\tprofileName.querySelector('h1').innerHTML = evn.target.value;\n// \t\tawait saveUsername(evn.target.value)\n// \t});\n// }\n// async function saveUsername (username) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/users`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\t'username': username\n// \t\t\t})\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t}\n// }\n// async function createRoom () {\n// \tconsole.log(localStorage.getItem('token'));\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\trenderRoom(res.id, res.name);\n// \t}\n// }\n// async function saveRoomName (name) {\n// \tconsole.log(name);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tname: name,\n// \t\t\t\tid: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// }\n// async function getRooms () {\n// \tconsole.log('getRooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t\treturn res.rooms;\n// \t} else {\n// \t\tconsole.log(req);\n// \t\treturn {};\n// \t}\n// }\n// async function renderRooms (rooms) {\n// \tconsole.log(rooms);\n// \tconst roomsEl = document.getElementById('rooms');\n// \tconst ul = roomsEl.querySelector('ul');\n// \tul.innerHTML = '';\n// \tfor (const room of rooms) {\n// \t\tconst li = document.createElement('li');\n// \t\tli.setAttribute('room_id', room.id);\n// \t\tli.innerHTML = room.name;\n// \t\tul.appendChild(li);\n// \t}\n// \tsetTimeout(function () {\n// \t\troomsEl.style.display = 'block';\n// \t\tsetRoomsListeners();\n// \t}, 100);\n\t\n// }\n// async function deleteRoom () {\n// \tconsole.log('delete rooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t} else {\n\t\t\n// \t}\n// }\n// function setRoomsListeners () {\n// \tconst rooms = document.querySelectorAll('#rooms li');\n// \tfor (const room of rooms) {\n// \t\troom.addEventListener('click', function (evn) {\n// \t\t\trenderRoom(evn.target.getAttribute('room_id'), evn.target.innerHTML);\n// \t\t});\n// \t}\n// }\n// async function renderRoom (id, name) {\n// \troomId = id;\n// \tconst changeRoom = document.querySelector('.change_room');\n// \tchangeRoom.style.display = 'block';\n// \tconst deleteRoom = document.querySelector('.delete_room');\n// \tdeleteRoom.style.display = 'block';\n// \tconst nameRoom = document.querySelector('.room_name');\n// \tnameRoom.style.display = 'block';\n// \tconsole.log('Render room');\n// \tconsole.log(name)\n// \tdocument.querySelector('.room_name h1').innerHTML = name;\n// \tdocument.getElementById('rooms').style.display = 'none';\n// \tconsole.log(id);\n// \tawait getUsers(id);\n// \tdocument.getElementById('chat').style.display = 'block';\n// \tawait loadMessages();\n// }\n// async function uploadImage (type) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tdata: imgB64String,\n// \t\t\t\ttype: type,\n// \t\t\t\troomId: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \treturn res;\n// }\n// async function renderImageUploader (file, img) {\n// \tconst readHandler = async function (evn) {\n// \t\tlet data = '';\n// \t\tlet bytes = new Uint8Array(evn.target.result);\n// \t\tlet length = bytes.byteLength;\n// \t\tfor (let i = 0; i < length; i++) {\n// \t\t\tdata += String.fromCharCode(bytes[i])\n// \t\t}\n// \t\tdata = window.btoa(data);\n// \t\timgB64String = data;\n// \t\timg.src = `data:image/png;base64,${data}`;\n// \t}\n// \tlet r = new FileReader();\n// \tlet blob = file.slice(0, file.size);\n// \tr.onload = readHandler;\n// \tr.readAsArrayBuffer(blob);\n// }\n// async function sendMessage (message) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tcontent: message\n// \t\t\t})\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tloadMessages();\n// \t}\n\n// }\n// async function loadMessages () {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconsole.log(req.status);\n// \tconst res = await req.json();\n// \trenderMessages(res.messages, res.id);\n// \tconsole.log(res);\n// }\n// async function renderMessages (messages, id) {\n// \tconst ul = document.querySelector('#messages');\n// \tul.innerHTML = '';\n// \tconst first = document.createElement('li');\n// \tfirst.innerHTML = '<h1>Welcome and Hi!!, start talking with your peers</h1>';\n// \tfirst.classList.add('first');\n// \tul.appendChild(first);\n// \tfor (const message of messages) {\n// \t\tconst mId = message.id;\n// \t\tconst li = document.createElement('li');\n// \t\tlet menu = '';\n// \t\tlet mine = '';\n// \t\tlet owner = message.user\n// \t\tif (id === message.user_id) {\n// \t\t\tli.classList.add('mine');\n// \t\t\towner = 'me'\n// \t\t\tmenu = `\n// \t\t\t\t\t<div option=\"delete\"></div>\n// \t\t\t\t\t<div menu=\"message\">\n// \t\t\t\t\t\t<h1></h1>\n// \t\t\t\t\t\t<h2 user_id=\"${id}\">Delete Message</h2>\n// \t\t\t\t\t</div>`;\n// \t\t\tmine = 'mine';\n// \t\t}\n// \t\tlet media = '';\n// \t\tif (message.media) {\n// \t\t\tmedia = `<img>`\n// \t\t}\n// \t\tconst date = new Date(message.created_at).toISOString().split('T')[1].slice(0, 5);\n// \t\tli.innerHTML = `<div cont=\"message\">\n// \t\t\t\t\t${menu}\n// \t\t\t\t\t<h3>${owner}</h3>\n// \t\t\t\t\t${media}\n// \t\t\t\t\t<p>${message.content}</p>\n// \t\t\t\t\t<h4>${date}</h4>\n// \t\t\t\t\t</div>`;\n// \t\tif (id === message.user_id) {\n// \t\t\tconst optionBtn = li.querySelector('[option=\"delete\"]');\n// \t\t\toptionBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'block';\n// \t\t\t});\n// \t\t\tconst closeBtn = li.querySelector('[menu=\"message\"] h1');\n// \t\t\tcloseBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t\tconst deleteBtn = li.querySelector('[menu=\"message\"] h2');\n// \t\t\tdeleteBtn.addEventListener('click', function (evn) {\n// \t\t\t\tconst messageId = message.id;\n// \t\t\t\tconst conf = confirm('Are you sure about deleting this message?');\n// \t\t\t\tif (conf) {\n// \t\t\t\t\tremoveMessage(messageId);\n// \t\t\t\t} else {\n// \t\t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t\t}\n// \t\t\t\t// li.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t}\n// \t\tul.appendChild(li);\n// \t\tif (message.media) {\n// \t\t\tconst img = li.querySelector('img');\n// \t\t\tconst obj = {id: message.id, object: img};\n// \t\t\tawait fetchMedia('message', Object.assign({}, obj));\n// \t\t}\n// \t}\n// \tsetTimeout(function () {\n// \t\tconst lastIndex = ul.querySelectorAll('li').length - 1;\n// \t\tconst lastLi = ul.querySelectorAll('li')[lastIndex];\n// \t\t// console.log(lastLi.offsetTop, ul.scrollTop, ul.scrollHeight);\n// \t\tul.scrollTop = ul.scrollHeight;\n// \t}, 200);\n\t\n// \t// lastLi.scrollTop = ul.scrollHeight;\n// \t// ul.scrollTop = ul.scrollHeight;\n// \t// lastLi.focus();\n// \t// lastLi.scrollIntoView(false);\n\t\n// }\n// async function fetchMedia (type, obj) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/${obj.id}?type=${type}`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.blob();\n// \tobj.object.src = window.URL.createObjectURL(res);\n// \t// console.log(res);\n// }\n// async function removeMessage (messageId) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/messages/${messageId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tloadMessages();\n// }\n// async function getUsers (id) {\n// \tconsole.log(id);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${id}/users`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tdocument.getElementById('users').style.display = 'block';\n// \trenderUsers(res.users);\n// }\n// function renderUsers (users) {\n// \tconst cont = document.querySelector('#users ul');\n// \tcont.innerHTML = '';\n// \tfor (const user of users) {\n// \t\tconst li = document.createElement('li');\n// \t\tconst time = `${user.last_login.split('T')[1].split('.')[0]}`;\n// \t\tconst date = `${user.last_login.split('T')[0]}`;\n// \t\tli.innerHTML = `<img><h1>${user.username}</h1><h2>Last login: ${time} / ${date}</h2>`;\n// \t\tcont.appendChild(li);\n// \t\tfetchMedia('profile', {\n// \t\t\tobject: li.querySelector('img'),\n// \t\t\tid: user.id\n// \t\t})\n// \t}\n// }"]},"metadata":{},"sourceType":"module"}