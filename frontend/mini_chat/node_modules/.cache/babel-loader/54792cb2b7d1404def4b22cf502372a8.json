{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/ChatRoom.js\";\nimport React, { Component } from 'react';\nimport ReactDOM, { unmountComponentAtNode } from 'react-dom';\nimport styles from './ChatRoom.module.css';\nlet roomId = 'undefined';\nexport default class ChatRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.rootRef = /*#__PURE__*/React.createRef();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.profile,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"save pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.side_bar,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.profile_pic,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 21,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.change_photo,\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 23,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.profile_name,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.room_name,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.change_room,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"change room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.delete_room,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"delete room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.account,\n          children: \"Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.rooms,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Active Rooms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"create new room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.users,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.chat,\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: styles.messages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.uploader,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.doodle_attribution,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://www.vecteezy.com/free-vector/pattern\",\n            target: \"_blank\",\n            children: \"Pattern Vectors by Vecteezy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.edit_container,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \".png,.jpg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"\",\n            cols: \"30\",\n            rows: \"10\",\n            placeholder: \"Write a new message\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 4\n    }, this);\n  }\n\n  componentDidMount() {\n    const comp = this;\n    const root = comp.rootRef.current;\n    const logout = root.querySelector(`${styles.logout}`);\n    logout.addEventListener('click', function () {\n      window.location.replace('/login');\n    });\n    const addRoom = document.querySelector('#rooms button');\n    addRoom.addEventListener('click', async function (evn) {\n      comp.createRoom();\n    });\n    const changeRoom = document.querySelector(`${styles.change_room}`);\n    const deleteRoombtn = document.querySelector(`${styles.delete_room}`);\n    const nameRoombtn = document.querySelector(`${styles.room_name}`);\n    changeRoom.addEventListener('click', async function () {\n      comp.renderRooms(await comp.getRooms());\n      document.querySelector('#users').style.display = 'none';\n      document.querySelector('#chat').style.display = 'none';\n      changeRoom.style.display = 'none';\n      deleteRoombtn.style.display = 'none';\n      nameRoombtn.style.display = 'none';\n    });\n    deleteRoombtn.addEventListener('click', async function () {\n      const conf = window.confirm('Are you sure about deleting this Room?');\n\n      if (conf) {\n        await comp.deleteRoom();\n        await comp.renderRooms(await comp.getRooms());\n        document.querySelector('#users').style.display = 'none';\n        document.querySelector('#chat').style.display = 'none';\n        changeRoom.style.display = 'none';\n        deleteRoombtn.style.display = 'none';\n        nameRoombtn.style.display = 'none';\n      }\n    });\n    nameRoombtn.querySelector('h1').addEventListener('click', function (evn) {\n      nameRoombtn.querySelector('input').style.display = 'block';\n      nameRoombtn.querySelector('input').value = evn.target.innerHTML;\n      nameRoombtn.querySelector('input').focus();\n    });\n    nameRoombtn.querySelector('input').addEventListener('keyup', async function (evn) {\n      if (evn.keyCode === 13) {\n        await comp.saveRoomName(evn.target.value);\n        evn.target.style.display = 'none';\n        nameRoombtn.querySelector('h1').innerHTML = evn.target.value;\n        evn.target.value = ''; // evn.target.blur();\n      }\n    });\n    nameRoombtn.querySelector('input').addEventListener('focusout', function (evn) {\n      evn.target.style.display = 'none';\n    });\n    comp.setRoomsListeners();\n    const editor = document.querySelector(`${styles.edit_container}`);\n    editor.querySelector('button').addEventListener('click', async function () {\n      const messageInput = editor.querySelector('textarea');\n      console.log(messageInput.value);\n      console.log('Send message');\n\n      if (messageInput.value !== '') {\n        await comp.sendMessage(messageInput.value);\n        messageInput.value = '';\n      }\n    });\n    editor.querySelector('div').addEventListener('click', function (evn) {\n      editor.querySelector('input').click();\n    });\n    editor.querySelector('input').addEventListener('change', function (evn) {\n      if (evn.target.files && evn.target.files.length > 0) {\n        const file = evn.target.files[0];\n        comp.renderImageUploader(file, document.querySelector(`${styles.uploader} img`));\n      }\n\n      evn.target.value = '';\n      document.querySelector(`${styles.uploader}`).style.display = 'block';\n    });\n    document.querySelector(`${styles.uploader} h2`).addEventListener('click', function () {\n      document.querySelector(`${styles.uploader}`).style.display = 'none';\n    });\n    document.querySelector(`${styles.uploader} button`).addEventListener('click', async function (evn) {\n      console.log('uploade image');\n      await comp.uploadImage('message'); // console.log(roomId);\n\n      comp.loadMessages();\n      document.querySelector(`${styles.uploader}`).style.display = 'none';\n    });\n    const profilePic = document.querySelector(`${styles.profile_pic}`);\n    profilePic.addEventListener('mousemove', function () {\n      profilePic.querySelector(`${styles.change_photo}`).style.display = 'block';\n    });\n    profilePic.addEventListener('mouseleave', function () {\n      profilePic.querySelector(`${styles.change_photo}`).style.display = 'none';\n    });\n    profilePic.querySelector(`${styles.change_photo}`).addEventListener('click', function () {\n      profilePic.querySelector(`${styles.change_photo} input`).click();\n    });\n    profilePic.querySelector(`${styles.change_photo} input`).addEventListener('change', function (evn) {\n      if (evn.target.files && evn.target.files.length > 0) {\n        const file = evn.target.files[0];\n        comp.renderImageUploader(file, document.querySelector(`${styles.profile} img`));\n      }\n\n      evn.target.value = '';\n      document.querySelector(`${styles.profile}`).style.display = 'block';\n    });\n    document.querySelector(`${styles.profile} h2`).addEventListener('click', function () {\n      document.querySelector(`${styles.profile}`).style.display = 'none';\n    });\n    document.querySelector(`${styles.profile} button`).addEventListener('click', async function (evn) {\n      console.log('uploade image');\n      await comp.uploadImage('profile');\n      comp.fetchMedia('profile', {\n        object: profilePic.querySelector('img'),\n        id: 0\n      });\n\n      if (roomId !== 'undefined') {\n        await comp.getUsers(roomId);\n      }\n\n      document.querySelector(`${styles.profile}`).style.display = 'none';\n    });\n    comp.fetchMedia('profile', {\n      object: profilePic.querySelector('img'),\n      id: 0\n    });\n    const profileName = document.querySelector(`${styles.profile_name}`);\n    profileName.querySelector('h1').addEventListener('click', function (evn) {\n      profileName.querySelector('input').style.display = 'block';\n      profileName.querySelector('input').value = evn.target.innerHTML;\n      profileName.querySelector('input').focus();\n    });\n    profileName.querySelector('input').addEventListener('keypress', async function (evn) {\n      if (evn.keyCode === 13) {\n        await comp.saveUsername(evn.target.value);\n        console.log('save username: ', evn.target.value);\n        evn.target.style.display = 'none';\n        profileName.querySelector('h1').innerHTML = evn.target.value;\n\n        if (roomId != 'undefined') {\n          await comp.getUsers(roomId);\n        }\n      }\n    });\n    profileName.querySelector('input').addEventListener('focusout', async function (evn) {\n      evn.target.style.display = 'none';\n      profileName.querySelector('h1').innerHTML = evn.target.value;\n      await comp.saveUsername(evn.target.value);\n    });\n  }\n\n} // let roomId = 'undefined';\n// let imgB64String;\n// window.onload = function () {\n// async function saveUsername (username) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/users`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\t'username': username\n// \t\t\t})\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t}\n// }\n// async function createRoom () {\n// \tconsole.log(localStorage.getItem('token'));\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\trenderRoom(res.id, res.name);\n// \t}\n// }\n// async function saveRoomName (name) {\n// \tconsole.log(name);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tname: name,\n// \t\t\t\tid: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// }\n// async function getRooms () {\n// \tconsole.log('getRooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t\treturn res.rooms;\n// \t} else {\n// \t\tconsole.log(req);\n// \t\treturn {};\n// \t}\n// }\n// async function renderRooms (rooms) {\n// \tconsole.log(rooms);\n// \tconst roomsEl = document.getElementById('rooms');\n// \tconst ul = roomsEl.querySelector('ul');\n// \tul.innerHTML = '';\n// \tfor (const room of rooms) {\n// \t\tconst li = document.createElement('li');\n// \t\tli.setAttribute('room_id', room.id);\n// \t\tli.innerHTML = room.name;\n// \t\tul.appendChild(li);\n// \t}\n// \tsetTimeout(function () {\n// \t\troomsEl.style.display = 'block';\n// \t\tsetRoomsListeners();\n// \t}, 100);\n// }\n// async function deleteRoom () {\n// \tconsole.log('delete rooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t} else {\n// \t}\n// }\n// function setRoomsListeners () {\n// \tconst rooms = document.querySelectorAll('#rooms li');\n// \tfor (const room of rooms) {\n// \t\troom.addEventListener('click', function (evn) {\n// \t\t\trenderRoom(evn.target.getAttribute('room_id'), evn.target.innerHTML);\n// \t\t});\n// \t}\n// }\n// async function renderRoom (id, name) {\n// \troomId = id;\n// \tconst changeRoom = document.querySelector('.change_room');\n// \tchangeRoom.style.display = 'block';\n// \tconst deleteRoom = document.querySelector('.delete_room');\n// \tdeleteRoom.style.display = 'block';\n// \tconst nameRoom = document.querySelector('.room_name');\n// \tnameRoom.style.display = 'block';\n// \tconsole.log('Render room');\n// \tconsole.log(name)\n// \tdocument.querySelector('.room_name h1').innerHTML = name;\n// \tdocument.getElementById('rooms').style.display = 'none';\n// \tconsole.log(id);\n// \tawait getUsers(id);\n// \tdocument.getElementById('chat').style.display = 'block';\n// \tawait loadMessages();\n// }\n// async function uploadImage (type) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tdata: imgB64String,\n// \t\t\t\ttype: type,\n// \t\t\t\troomId: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \treturn res;\n// }\n// async function renderImageUploader (file, img) {\n// \tconst readHandler = async function (evn) {\n// \t\tlet data = '';\n// \t\tlet bytes = new Uint8Array(evn.target.result);\n// \t\tlet length = bytes.byteLength;\n// \t\tfor (let i = 0; i < length; i++) {\n// \t\t\tdata += String.fromCharCode(bytes[i])\n// \t\t}\n// \t\tdata = window.btoa(data);\n// \t\timgB64String = data;\n// \t\timg.src = `data:image/png;base64,${data}`;\n// \t}\n// \tlet r = new FileReader();\n// \tlet blob = file.slice(0, file.size);\n// \tr.onload = readHandler;\n// \tr.readAsArrayBuffer(blob);\n// }\n// async function sendMessage (message) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tcontent: message\n// \t\t\t})\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tloadMessages();\n// \t}\n// }\n// async function loadMessages () {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconsole.log(req.status);\n// \tconst res = await req.json();\n// \trenderMessages(res.messages, res.id);\n// \tconsole.log(res);\n// }\n// async function renderMessages (messages, id) {\n// \tconst ul = document.querySelector('#messages');\n// \tul.innerHTML = '';\n// \tconst first = document.createElement('li');\n// \tfirst.innerHTML = '<h1>Welcome and Hi!!, start talking with your peers</h1>';\n// \tfirst.classList.add('first');\n// \tul.appendChild(first);\n// \tfor (const message of messages) {\n// \t\tconst mId = message.id;\n// \t\tconst li = document.createElement('li');\n// \t\tlet menu = '';\n// \t\tlet mine = '';\n// \t\tlet owner = message.user\n// \t\tif (id === message.user_id) {\n// \t\t\tli.classList.add('mine');\n// \t\t\towner = 'me'\n// \t\t\tmenu = `\n// \t\t\t\t\t<div option=\"delete\"></div>\n// \t\t\t\t\t<div menu=\"message\">\n// \t\t\t\t\t\t<h1></h1>\n// \t\t\t\t\t\t<h2 user_id=\"${id}\">Delete Message</h2>\n// \t\t\t\t\t</div>`;\n// \t\t\tmine = 'mine';\n// \t\t}\n// \t\tlet media = '';\n// \t\tif (message.media) {\n// \t\t\tmedia = `<img>`\n// \t\t}\n// \t\tconst date = new Date(message.created_at).toISOString().split('T')[1].slice(0, 5);\n// \t\tli.innerHTML = `<div cont=\"message\">\n// \t\t\t\t\t${menu}\n// \t\t\t\t\t<h3>${owner}</h3>\n// \t\t\t\t\t${media}\n// \t\t\t\t\t<p>${message.content}</p>\n// \t\t\t\t\t<h4>${date}</h4>\n// \t\t\t\t\t</div>`;\n// \t\tif (id === message.user_id) {\n// \t\t\tconst optionBtn = li.querySelector('[option=\"delete\"]');\n// \t\t\toptionBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'block';\n// \t\t\t});\n// \t\t\tconst closeBtn = li.querySelector('[menu=\"message\"] h1');\n// \t\t\tcloseBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t\tconst deleteBtn = li.querySelector('[menu=\"message\"] h2');\n// \t\t\tdeleteBtn.addEventListener('click', function (evn) {\n// \t\t\t\tconst messageId = message.id;\n// \t\t\t\tconst conf = confirm('Are you sure about deleting this message?');\n// \t\t\t\tif (conf) {\n// \t\t\t\t\tremoveMessage(messageId);\n// \t\t\t\t} else {\n// \t\t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t\t}\n// \t\t\t\t// li.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t}\n// \t\tul.appendChild(li);\n// \t\tif (message.media) {\n// \t\t\tconst img = li.querySelector('img');\n// \t\t\tconst obj = {id: message.id, object: img};\n// \t\t\tawait fetchMedia('message', Object.assign({}, obj));\n// \t\t}\n// \t}\n// \tsetTimeout(function () {\n// \t\tconst lastIndex = ul.querySelectorAll('li').length - 1;\n// \t\tconst lastLi = ul.querySelectorAll('li')[lastIndex];\n// \t\t// console.log(lastLi.offsetTop, ul.scrollTop, ul.scrollHeight);\n// \t\tul.scrollTop = ul.scrollHeight;\n// \t}, 200);\n// \t// lastLi.scrollTop = ul.scrollHeight;\n// \t// ul.scrollTop = ul.scrollHeight;\n// \t// lastLi.focus();\n// \t// lastLi.scrollIntoView(false);\n// }\n// async function fetchMedia (type, obj) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/${obj.id}?type=${type}`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.blob();\n// \tobj.object.src = window.URL.createObjectURL(res);\n// \t// console.log(res);\n// }\n// async function removeMessage (messageId) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/messages/${messageId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tloadMessages();\n// }\n// async function getUsers (id) {\n// \tconsole.log(id);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${id}/users`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tdocument.getElementById('users').style.display = 'block';\n// \trenderUsers(res.users);\n// }\n// function renderUsers (users) {\n// \tconst cont = document.querySelector('#users ul');\n// \tcont.innerHTML = '';\n// \tfor (const user of users) {\n// \t\tconst li = document.createElement('li');\n// \t\tconst time = `${user.last_login.split('T')[1].split('.')[0]}`;\n// \t\tconst date = `${user.last_login.split('T')[0]}`;\n// \t\tli.innerHTML = `<img><h1>${user.username}</h1><h2>Last login: ${time} / ${date}</h2>`;\n// \t\tcont.appendChild(li);\n// \t\tfetchMedia('profile', {\n// \t\t\tobject: li.querySelector('img'),\n// \t\t\tid: user.id\n// \t\t})\n// \t}\n// }","map":{"version":3,"sources":["/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/ChatRoom.js"],"names":["React","Component","ReactDOM","unmountComponentAtNode","styles","roomId","ChatRoom","constructor","props","rootRef","createRef","render","profile","side_bar","profile_pic","change_photo","profile_name","room_name","change_room","delete_room","logout","account","rooms","users","chat","messages","uploader","doodle_attribution","edit_container","componentDidMount","comp","root","current","querySelector","addEventListener","window","location","replace","addRoom","document","evn","createRoom","changeRoom","deleteRoombtn","nameRoombtn","renderRooms","getRooms","style","display","conf","confirm","deleteRoom","value","target","innerHTML","focus","keyCode","saveRoomName","setRoomsListeners","editor","messageInput","console","log","sendMessage","click","files","length","file","renderImageUploader","uploadImage","loadMessages","profilePic","fetchMedia","object","id","getUsers","profileName","saveUsername"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM, { unmountComponentAtNode } from 'react-dom';\nimport styles from './ChatRoom.module.css';\nlet roomId = 'undefined';\n\nexport default class ChatRoom extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.rootRef = React.createRef();\n\t}\n\trender () {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div className={ styles.profile }>\n\t\t\t\t\t<h2></h2>\n\t\t\t\t\t<img></img>\n\t\t\t\t\t<button>save pic</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={ styles.side_bar }>\n\t\t\t\t\t<div className={ styles.profile_pic }>\n\t\t\t\t\t\t<img></img>\n\t\t\t\t\t\t<div className={ styles.change_photo }>\n\t\t\t\t\t\t\t<input type=\"file\"></input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles.profile_name }>\n\t\t\t\t\t\t<h1>username</h1>\n\t\t\t\t\t\t<input type=\"text\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles.room_name }>\n\t\t\t\t\t\t<h1></h1>\n\t\t\t\t\t\t<input type=\"text\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles.change_room }>\n\t\t\t\t\t\t<h1>change room</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles.delete_room }>\n\t\t\t\t\t\t<h1>delete room</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h2 className={ styles.logout }>Logout</h2>\n\t\t\t\t\t<h2 className={ styles.account }>Account</h2>\n\t\t\t\t</div>\n\t\t\t\t<div className={ styles.rooms }>\n\t\t\t\t\t<h1>Active Rooms</h1>\n\t\t\t\t\t<ul>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<button>create new room</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={ styles.users }>\n\t\t\t\t\t<h1>Users</h1>\n\t\t\t\t\t<ul>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t<div className={ styles.chat }>\n\t\t\t\t\t<ul className={ styles.messages }>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div className={ styles.uploader }>\n\t\t\t\t\t\t<h2></h2>\n\t\t\t\t\t\t<img></img>\n\t\t\t\t\t\t<button></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles.doodle_attribution }>\n\t\t\t\t\t\t<a href=\"https://www.vecteezy.com/free-vector/pattern\" target=\"_blank\">Pattern Vectors by Vecteezy</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles.edit_container }>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input type=\"file\" accept=\".png,.jpg\"></input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<textarea name=\"\" cols=\"30\" rows=\"10\" placeholder=\"Write a new message\"></textarea>\n\t\t\t\t\t\t<button></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount () {\n\t\tconst comp = this;\n\t\tconst root = comp.rootRef.current;\n\t\tconst logout = root.querySelector(`${styles.logout}`);\n\t\tlogout.addEventListener('click', function () {\n\t\t\twindow.location.replace('/login');\n\t\t});\n\t\tconst addRoom = document.querySelector('#rooms button');\n\t\taddRoom.addEventListener('click', async function (evn) {\n\t\t\tcomp.createRoom();\n\t\t});\n\t\tconst changeRoom = document.querySelector(`${styles.change_room}`);\n\t\tconst deleteRoombtn = document.querySelector(`${styles.delete_room}`);\n\t\tconst nameRoombtn = document.querySelector(`${styles.room_name}`);\n\t\tchangeRoom.addEventListener('click', async function () {\n\t\t\tcomp.renderRooms(await comp.getRooms());\n\t\t\tdocument.querySelector('#users').style.display = 'none';\n\t\t\tdocument.querySelector('#chat').style.display = 'none';\n\t\t\tchangeRoom.style.display = 'none';\n\t\t\tdeleteRoombtn.style.display = 'none';\n\t\t\tnameRoombtn.style.display = 'none';\n\t\t});\n\t\tdeleteRoombtn.addEventListener('click', async function () {\n\t\t\tconst conf = window.confirm('Are you sure about deleting this Room?');\n\t\t\tif (conf) {\n\t\t\t\tawait comp.deleteRoom();\n\t\t\t\tawait comp.renderRooms(await comp.getRooms());\n\t\t\t\tdocument.querySelector('#users').style.display = 'none';\n\t\t\t\tdocument.querySelector('#chat').style.display = 'none';\n\t\t\t\tchangeRoom.style.display = 'none';\n\t\t\t\tdeleteRoombtn.style.display = 'none';\n\t\t\t\tnameRoombtn.style.display = 'none';\n\t\t\t}\n\t\t});\n\t\tnameRoombtn.querySelector('h1').addEventListener('click', function (evn) {\n\t\t\tnameRoombtn.querySelector('input').style.display = 'block';\n\t\t\tnameRoombtn.querySelector('input').value = evn.target.innerHTML;\n\t\t\tnameRoombtn.querySelector('input').focus();\n\t\t});\n\t\tnameRoombtn.querySelector('input').addEventListener('keyup', async function (evn) {\n\t\t\tif (evn.keyCode === 13) {\n\t\t\t\tawait comp.saveRoomName(evn.target.value);\n\t\t\t\tevn.target.style.display = 'none';\n\t\t\t\tnameRoombtn.querySelector('h1').innerHTML = evn.target.value;\n\t\t\t\tevn.target.value = '';\n\t\t\t\t// evn.target.blur();\n\t\t\t}\n\t\t});\n\t\tnameRoombtn.querySelector('input').addEventListener('focusout', function (evn) {\n\t\t\tevn.target.style.display = 'none';\n\t\t});\n\t\tcomp.setRoomsListeners();\n\t\tconst editor = document.querySelector(`${styles.edit_container}`);\n\t\teditor.querySelector('button').addEventListener('click', async function () {\n\t\t\tconst messageInput = editor.querySelector('textarea');\n\t\t\tconsole.log(messageInput.value);\n\t\t\tconsole.log('Send message');\n\t\t\tif (messageInput.value !== '') {\n\t\t\t\tawait comp.sendMessage(messageInput.value);\n\t\t\t\tmessageInput.value = '';\n\t\t\t}\n\t\t});\n\t\teditor.querySelector('div').addEventListener('click', function (evn) {\n\t\t\teditor.querySelector('input').click();\n\t\t});\n\t\teditor.querySelector('input').addEventListener('change', function (evn) {\n\t\t\tif (evn.target.files && evn.target.files.length > 0) {\n\t\t\t\tconst file = evn.target.files[0];\n\t\t\t\tcomp.renderImageUploader(file, document.querySelector(`${styles.uploader} img`));\n\t\t\t}\n\t\t\tevn.target.value = '';\n\t\t\tdocument.querySelector(`${styles.uploader}`).style.display = 'block';\n\t\t});\n\t\tdocument.querySelector(`${styles.uploader} h2`).addEventListener('click', function () {\n\t\t\tdocument.querySelector(`${styles.uploader }`).style.display = 'none';\n\t\t});\n\t\tdocument.querySelector(`${styles.uploader} button`).addEventListener('click', async function (evn) {\n\t\t\tconsole.log('uploade image');\n\t\t\tawait comp.uploadImage('message');\n\t\t\t// console.log(roomId);\n\t\t\tcomp.loadMessages();\n\t\t\tdocument.querySelector(`${styles.uploader}`).style.display = 'none';\n\t\t});\n\t\tconst profilePic = document.querySelector(`${styles.profile_pic}`);\n\t\tprofilePic.addEventListener('mousemove', function () {\n\t\t\tprofilePic.querySelector(`${styles.change_photo}`).style.display = 'block';\n\t\t});\n\t\tprofilePic.addEventListener('mouseleave', function () {\n\t\t\tprofilePic.querySelector(`${styles.change_photo}`).style.display = 'none';\n\t\t});\n\t\tprofilePic.querySelector(`${styles.change_photo}`).addEventListener('click', function () {\n\t\t\tprofilePic.querySelector(`${styles.change_photo} input`).click();\n\t\t});\n\t\tprofilePic.querySelector(`${styles.change_photo} input`).addEventListener('change', function (evn) {\n\t\t\tif (evn.target.files && evn.target.files.length > 0) {\n\t\t\t\tconst file = evn.target.files[0];\n\t\t\t\tcomp.renderImageUploader(file, document.querySelector(`${styles.profile} img`));\n\t\t\t}\n\t\t\tevn.target.value = '';\n\t\t\tdocument.querySelector(`${styles.profile}`).style.display = 'block';\n\t\t});\n\t\tdocument.querySelector(`${styles.profile} h2`).addEventListener('click', function () {\n\t\t\tdocument.querySelector(`${styles.profile}`).style.display = 'none';\n\t\t});\n\t\tdocument.querySelector(`${styles.profile} button`).addEventListener('click', async function (evn) {\n\t\t\tconsole.log('uploade image');\n\t\t\tawait comp.uploadImage('profile');\n\t\t\tcomp.fetchMedia('profile', {\n\t\t\t\tobject: profilePic.querySelector('img'),\n\t\t\t\tid: 0\n\t\t\t})\n\t\t\tif (roomId !== 'undefined') {\n\t\t\t\tawait comp.getUsers(roomId);\n\t\t\t}\n\t\t\tdocument.querySelector(`${styles.profile}`).style.display = 'none';\n\t\t});\n\t\tcomp.fetchMedia('profile', {\n\t\t\tobject: profilePic.querySelector('img'),\n\t\t\tid: 0\n\t\t});\n\t\tconst profileName = document.querySelector(`${styles.profile_name}`);\n\t\tprofileName.querySelector('h1').addEventListener('click', function (evn) {\n\t\t\tprofileName.querySelector('input').style.display = 'block';\n\t\t\tprofileName.querySelector('input').value = evn.target.innerHTML;\n\t\t\tprofileName.querySelector('input').focus();\n\t\t});\n\t\tprofileName.querySelector('input').addEventListener('keypress', async function (evn) {\n\t\t\tif (evn.keyCode === 13) {\n\t\t\t\tawait comp.saveUsername(evn.target.value)\n\t\t\t\tconsole.log('save username: ', evn.target.value);\n\t\t\t\tevn.target.style.display = 'none';\n\t\t\t\tprofileName.querySelector('h1').innerHTML = evn.target.value;\n\t\t\t\tif (roomId != 'undefined') {\n\t\t\t\t\tawait comp.getUsers(roomId);\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\t\tprofileName.querySelector('input').addEventListener('focusout', async function (evn) {\n\t\t\tevn.target.style.display = 'none';\n\t\t\tprofileName.querySelector('h1').innerHTML = evn.target.value;\n\t\t\tawait comp.saveUsername(evn.target.value)\n\t\t});\n\t}\n}\n\n\n\n\n\n\n\n\n\n\n\n// let roomId = 'undefined';\n// let imgB64String;\n// window.onload = function () {\n\t\n// async function saveUsername (username) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/users`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\t'username': username\n// \t\t\t})\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t}\n// }\n// async function createRoom () {\n// \tconsole.log(localStorage.getItem('token'));\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \t// console.log(await req.json());\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\trenderRoom(res.id, res.name);\n// \t}\n// }\n// async function saveRoomName (name) {\n// \tconsole.log(name);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'PUT',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tname: name,\n// \t\t\t\tid: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// }\n// async function getRooms () {\n// \tconsole.log('getRooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t\treturn res.rooms;\n// \t} else {\n// \t\tconsole.log(req);\n// \t\treturn {};\n// \t}\n// }\n// async function renderRooms (rooms) {\n// \tconsole.log(rooms);\n// \tconst roomsEl = document.getElementById('rooms');\n// \tconst ul = roomsEl.querySelector('ul');\n// \tul.innerHTML = '';\n// \tfor (const room of rooms) {\n// \t\tconst li = document.createElement('li');\n// \t\tli.setAttribute('room_id', room.id);\n// \t\tli.innerHTML = room.name;\n// \t\tul.appendChild(li);\n// \t}\n// \tsetTimeout(function () {\n// \t\troomsEl.style.display = 'block';\n// \t\tsetRoomsListeners();\n// \t}, 100);\n\t\n// }\n// async function deleteRoom () {\n// \tconsole.log('delete rooms');\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tconst res = await req.json();\n// \t\tconsole.log(res);\n// \t} else {\n\t\t\n// \t}\n// }\n// function setRoomsListeners () {\n// \tconst rooms = document.querySelectorAll('#rooms li');\n// \tfor (const room of rooms) {\n// \t\troom.addEventListener('click', function (evn) {\n// \t\t\trenderRoom(evn.target.getAttribute('room_id'), evn.target.innerHTML);\n// \t\t});\n// \t}\n// }\n// async function renderRoom (id, name) {\n// \troomId = id;\n// \tconst changeRoom = document.querySelector('.change_room');\n// \tchangeRoom.style.display = 'block';\n// \tconst deleteRoom = document.querySelector('.delete_room');\n// \tdeleteRoom.style.display = 'block';\n// \tconst nameRoom = document.querySelector('.room_name');\n// \tnameRoom.style.display = 'block';\n// \tconsole.log('Render room');\n// \tconsole.log(name)\n// \tdocument.querySelector('.room_name h1').innerHTML = name;\n// \tdocument.getElementById('rooms').style.display = 'none';\n// \tconsole.log(id);\n// \tawait getUsers(id);\n// \tdocument.getElementById('chat').style.display = 'block';\n// \tawait loadMessages();\n// }\n// async function uploadImage (type) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tdata: imgB64String,\n// \t\t\t\ttype: type,\n// \t\t\t\troomId: roomId\n// \t\t\t})\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \treturn res;\n// }\n// async function renderImageUploader (file, img) {\n// \tconst readHandler = async function (evn) {\n// \t\tlet data = '';\n// \t\tlet bytes = new Uint8Array(evn.target.result);\n// \t\tlet length = bytes.byteLength;\n// \t\tfor (let i = 0; i < length; i++) {\n// \t\t\tdata += String.fromCharCode(bytes[i])\n// \t\t}\n// \t\tdata = window.btoa(data);\n// \t\timgB64String = data;\n// \t\timg.src = `data:image/png;base64,${data}`;\n// \t}\n// \tlet r = new FileReader();\n// \tlet blob = file.slice(0, file.size);\n// \tr.onload = readHandler;\n// \tr.readAsArrayBuffer(blob);\n// }\n// async function sendMessage (message) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages/`,\n// \t\t{\n// \t\t\tmethod: 'POST',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t},\n// \t\t\tbody: JSON.stringify({\n// \t\t\t\tcontent: message\n// \t\t\t})\n// \t\t}\n// \t);\n// \tif (req.status === 200) {\n// \t\tloadMessages();\n// \t}\n\n// }\n// async function loadMessages () {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${roomId}/messages`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconsole.log(req.status);\n// \tconst res = await req.json();\n// \trenderMessages(res.messages, res.id);\n// \tconsole.log(res);\n// }\n// async function renderMessages (messages, id) {\n// \tconst ul = document.querySelector('#messages');\n// \tul.innerHTML = '';\n// \tconst first = document.createElement('li');\n// \tfirst.innerHTML = '<h1>Welcome and Hi!!, start talking with your peers</h1>';\n// \tfirst.classList.add('first');\n// \tul.appendChild(first);\n// \tfor (const message of messages) {\n// \t\tconst mId = message.id;\n// \t\tconst li = document.createElement('li');\n// \t\tlet menu = '';\n// \t\tlet mine = '';\n// \t\tlet owner = message.user\n// \t\tif (id === message.user_id) {\n// \t\t\tli.classList.add('mine');\n// \t\t\towner = 'me'\n// \t\t\tmenu = `\n// \t\t\t\t\t<div option=\"delete\"></div>\n// \t\t\t\t\t<div menu=\"message\">\n// \t\t\t\t\t\t<h1></h1>\n// \t\t\t\t\t\t<h2 user_id=\"${id}\">Delete Message</h2>\n// \t\t\t\t\t</div>`;\n// \t\t\tmine = 'mine';\n// \t\t}\n// \t\tlet media = '';\n// \t\tif (message.media) {\n// \t\t\tmedia = `<img>`\n// \t\t}\n// \t\tconst date = new Date(message.created_at).toISOString().split('T')[1].slice(0, 5);\n// \t\tli.innerHTML = `<div cont=\"message\">\n// \t\t\t\t\t${menu}\n// \t\t\t\t\t<h3>${owner}</h3>\n// \t\t\t\t\t${media}\n// \t\t\t\t\t<p>${message.content}</p>\n// \t\t\t\t\t<h4>${date}</h4>\n// \t\t\t\t\t</div>`;\n// \t\tif (id === message.user_id) {\n// \t\t\tconst optionBtn = li.querySelector('[option=\"delete\"]');\n// \t\t\toptionBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'block';\n// \t\t\t});\n// \t\t\tconst closeBtn = li.querySelector('[menu=\"message\"] h1');\n// \t\t\tcloseBtn.addEventListener('click', function (evn) {\n// \t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t\tconst deleteBtn = li.querySelector('[menu=\"message\"] h2');\n// \t\t\tdeleteBtn.addEventListener('click', function (evn) {\n// \t\t\t\tconst messageId = message.id;\n// \t\t\t\tconst conf = confirm('Are you sure about deleting this message?');\n// \t\t\t\tif (conf) {\n// \t\t\t\t\tremoveMessage(messageId);\n// \t\t\t\t} else {\n// \t\t\t\t\tli.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t\t}\n// \t\t\t\t// li.querySelector('[menu=\"message\"]').style.display = 'none';\n// \t\t\t});\n// \t\t}\n// \t\tul.appendChild(li);\n// \t\tif (message.media) {\n// \t\t\tconst img = li.querySelector('img');\n// \t\t\tconst obj = {id: message.id, object: img};\n// \t\t\tawait fetchMedia('message', Object.assign({}, obj));\n// \t\t}\n// \t}\n// \tsetTimeout(function () {\n// \t\tconst lastIndex = ul.querySelectorAll('li').length - 1;\n// \t\tconst lastLi = ul.querySelectorAll('li')[lastIndex];\n// \t\t// console.log(lastLi.offsetTop, ul.scrollTop, ul.scrollHeight);\n// \t\tul.scrollTop = ul.scrollHeight;\n// \t}, 200);\n\t\n// \t// lastLi.scrollTop = ul.scrollHeight;\n// \t// ul.scrollTop = ul.scrollHeight;\n// \t// lastLi.focus();\n// \t// lastLi.scrollIntoView(false);\n\t\n// }\n// async function fetchMedia (type, obj) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/media/${obj.id}?type=${type}`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.blob();\n// \tobj.object.src = window.URL.createObjectURL(res);\n// \t// console.log(res);\n// }\n// async function removeMessage (messageId) {\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/messages/${messageId}/`,\n// \t\t{\n// \t\t\tmethod: 'DELETE',\n// \t\t\theaders: {\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tloadMessages();\n// }\n// async function getUsers (id) {\n// \tconsole.log(id);\n// \tconst req = await fetch(\n// \t\t`http://localhost:8000/rooms/${id}/users`,\n// \t\t{\n// \t\t\tmethod: 'GET',\n// \t\t\theaders: {\n// \t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n// \t\t\t}\n// \t\t}\n// \t);\n// \tconst res = await req.json();\n// \tconsole.log(res);\n// \tdocument.getElementById('users').style.display = 'block';\n// \trenderUsers(res.users);\n// }\n// function renderUsers (users) {\n// \tconst cont = document.querySelector('#users ul');\n// \tcont.innerHTML = '';\n// \tfor (const user of users) {\n// \t\tconst li = document.createElement('li');\n// \t\tconst time = `${user.last_login.split('T')[1].split('.')[0]}`;\n// \t\tconst date = `${user.last_login.split('T')[0]}`;\n// \t\tli.innerHTML = `<img><h1>${user.username}</h1><h2>Last login: ${time} / ${date}</h2>`;\n// \t\tcont.appendChild(li);\n// \t\tfetchMedia('profile', {\n// \t\t\tobject: li.querySelector('img'),\n// \t\t\tid: user.id\n// \t\t})\n// \t}\n// }"]},"metadata":{},"sourceType":"module"}