{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/Login.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './Login.module.css';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.rootRef = /*#__PURE__*/React.createRef();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: this.rootRef,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.form,\n        autoComplete: \"off\",\n        action: \"/api-token-auth/\",\n        method: \"post\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Member Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: styles['form-control'],\n            name: \"username\",\n            id: \"username\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"Enter email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            id: \"emailHelp\",\n            className: [styles['form-text'], styles['text-muted']],\n            children: \"We'll never share your email with anyone else.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: styles['form-control'],\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 21,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group form-check'],\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: styles['form-check-label'],\n            htmlFor: \"exampleCheck1\",\n            children: \"Check me out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            className: styles['form-check-input'],\n            id: \"exampleCheck1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles['btn btn-primary'],\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['link'],\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/login\",\n            children: \"Forgot password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['link'],\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/register\",\n            children: \"I don't have an account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 4\n    }, this);\n  }\n\n  componentDidMount() {\n    console.log(styles.error);\n    const root = this.rootRef;\n    const inputs = root.current.querySelectorAll('input');\n\n    for (const inp of inputs) {\n      inp.addEventListener('input', function () {\n        const err = root.current.querySelector(`.${styles.error}`);\n        err.innerHTML = '';\n      });\n    }\n\n    root.current.querySelector('form').addEventListener('submit', async function (evn) {\n      evn.preventDefault();\n      console.log('request for token');\n      const data = new FormData(evn.target);\n      const credentials = {};\n\n      for (const key of data.keys()) {\n        credentials[key] = data.get(key);\n      }\n\n      console.log(credentials);\n      const req = await fetch(`http://localhost:8000/api-token-auth/`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n\n      if (req.status === 200) {\n        const res = await req.json();\n        localStorage.setItem('token', res.token); // const htmlFetch = await fetch(\n        // \t`http://localhost:8000/dashboard`,\n        // \t{\n        // \t\tmethod: 'GET',\n        // \t\theaders: {\n        // \t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n        // \t\t}\n        // \t}\n        // );\n        // const html = await htmlFetch.text();\n        // document.open();\n        // document.write(html);\n        // document.close();\n        // window.history.replaceState(\n        // \t{additionalInformation: 'some info'},\n        // \t'Dashboard',\n        // \t'http://localhost:8000/dashboard'\n        // )\n        //window.location.replace('/dashboard')\n      } else if (req.status === 404) {\n        console.log('Error generating token', await req.json());\n        const error = root.current.querySelector(`.${styles.error}`);\n        error.innerHTML = 'Wrong user or password';\n        evn.target.reset();\n      } else {\n        console.log('User or password wrong');\n        const error = root.current.querySelector(`.${styles.error}`);\n        error.innerHTML = 'Wrong user or password';\n        evn.target.reset();\n      }\n    });\n  }\n\n}\nexport class Register extends Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Hello Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 4\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/Login.js"],"names":["React","Component","ReactDOM","styles","Login","constructor","props","rootRef","createRef","render","form","error","componentDidMount","console","log","root","inputs","current","querySelectorAll","inp","addEventListener","err","querySelector","innerHTML","evn","preventDefault","data","FormData","target","credentials","key","keys","get","req","fetch","method","headers","body","JSON","stringify","status","res","json","localStorage","setItem","token","reset","Register"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './Login.module.css';\n\nexport default class Login extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.rootRef = React.createRef();\n\t}\n\trender () {\n\t\treturn(\n\t\t\t<div ref={ this.rootRef }>\n\t\t\t\t<form className={ styles.form } autoComplete=\"off\" action=\"/api-token-auth/\" method=\"post\">\n\t\t\t\t\t<h1>Member Login</h1>\n\t\t\t\t\t<h2 className={ styles.error }></h2>\n\t\t\t\t\t<div className={ styles['form-group'] }>\n\t\t\t\t\t\t<input type=\"text\" className={ styles['form-control'] } name=\"username\" id=\"username\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\"></input>\n\t\t\t\t\t\t<small id=\"emailHelp\" className={ [styles['form-text'], styles['text-muted']] }>We'll never share your email with anyone else.</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group'] }>\n\t\t\t\t\t<input type=\"password\" className={ styles['form-control'] } name=\"password\" id=\"password\" placeholder=\"Password\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group form-check'] }>\n\t\t\t\t\t\t<label className={ styles['form-check-label'] } htmlFor=\"exampleCheck1\">Check me out</label>\n\t\t\t\t\t\t<input type=\"checkbox\" className={ styles['form-check-input'] } id=\"exampleCheck1\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"submit\" className={ styles['btn btn-primary'] }>Submit</button>\n\t\t\t\t\t<div className={ styles['link'] }>\n\t\t\t\t\t\t<a href=\"/login\">Forgot password</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['link'] }>\n\t\t\t\t\t\t<a href=\"/register\">I don't have an account</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount () {\n\t\tconsole.log(styles.error);\n\t\tconst root = this.rootRef;\n\t\tconst inputs = root.current.querySelectorAll('input');\n\t\tfor (const inp of inputs) {\n\t\t\tinp.addEventListener('input', function () {\n\t\t\t\tconst err = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terr.innerHTML = '';\n\t\t\t});\n\t\t}\n\t\troot.current.querySelector('form').addEventListener('submit', async function (evn) {\n\t\t\tevn.preventDefault();\n\t\t\tconsole.log('request for token');\n\t\t\tconst data = new FormData(evn.target);\n\t\t\tconst credentials = {};\n\t\t\tfor (const key of data.keys()) {\n\t\t\t\tcredentials[key] = data.get(key);\n\t\t\t}\n\t\t\tconsole.log(credentials);\n\t\t\tconst req = await fetch(\n\t\t\t\t`http://localhost:8000/api-token-auth/`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(credentials)\n\t\t\t\t}\n\t\t\t)\n\t\t\tif (req.status === 200) {\n\t\t\t\tconst res = await req.json();\n\t\t\t\tlocalStorage.setItem('token', res.token);\n\t\t\t\t// const htmlFetch = await fetch(\n\t\t\t\t// \t`http://localhost:8000/dashboard`,\n\t\t\t\t// \t{\n\t\t\t\t// \t\tmethod: 'GET',\n\t\t\t\t// \t\theaders: {\n\t\t\t\t// \t\t\t'Authorization': `Token ${localStorage.getItem('token')}`\n\t\t\t\t// \t\t}\n\t\t\t\t// \t}\n\t\t\t\t// );\n\t\t\t\t// const html = await htmlFetch.text();\n\t\t\t\t// document.open();\n\t\t\t\t// document.write(html);\n\t\t\t\t// document.close();\n\t\t\t\t// window.history.replaceState(\n\t\t\t\t// \t{additionalInformation: 'some info'},\n\t\t\t\t// \t'Dashboard',\n\t\t\t\t// \t'http://localhost:8000/dashboard'\n\t\t\t\t// )\n\t\t\t\t//window.location.replace('/dashboard')\n\t\t\t} else if (req.status === 404) {\n\t\t\t\tconsole.log('Error generating token', await req.json());\n\t\t\t\tconst error = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terror.innerHTML = 'Wrong user or password';\n\t\t\t\tevn.target.reset();\n\t\t\t} else {\n\t\t\t\tconsole.log('User or password wrong');\n\t\t\t\tconst error = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terror.innerHTML = 'Wrong user or password';\n\t\t\t\tevn.target.reset();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class Register extends Component {\n\trender () {\n\t\treturn(\n\t\t\t<h1>Hello Register</h1>\n\t\t);\n\t}\n}"]},"metadata":{},"sourceType":"module"}