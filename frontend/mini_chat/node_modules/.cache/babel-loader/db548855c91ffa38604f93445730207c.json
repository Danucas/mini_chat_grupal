{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/Login.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './Login.module.css';\nimport ChatRoom from './ChatRoom';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.rootRef = /*#__PURE__*/React.createRef();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: this.rootRef,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.form,\n        autoComplete: \"off\",\n        action: \"/api-token-auth/\",\n        method: \"post\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Member Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: styles['form-control'],\n            name: \"username\",\n            id: \"username\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"Enter email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            id: \"emailHelp\",\n            className: [styles['form-text'], styles['text-muted']],\n            children: \"We'll never share your email with anyone else.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 19,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: styles['form-control'],\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group form-check'],\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: styles['form-check-label'],\n            htmlFor: \"exampleCheck1\",\n            children: \"Check me out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            className: styles['form-check-input'],\n            id: \"exampleCheck1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: styles['btn btn-primary'],\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['link'],\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/register\",\n            children: \"I don't have an account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 4\n    }, this);\n  }\n\n  componentDidMount() {\n    console.log(styles.error);\n    const root = this.rootRef;\n    const inputs = root.current.querySelectorAll('input');\n\n    for (const inp of inputs) {\n      inp.addEventListener('input', function () {\n        const err = root.current.querySelector(`.${styles.error}`);\n        err.innerHTML = '';\n      });\n    }\n\n    const linkToRegister = root.current.querySelector(`.${styles.link}`);\n    linkToRegister.addEventListener('click', function (evn) {\n      evn.preventDefault();\n      ReactDOM.render( /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 5\n      }, this), document.getElementById('root'));\n    });\n    root.current.querySelector('form').addEventListener('submit', async function (evn) {\n      evn.preventDefault();\n      console.log('request for token');\n      const data = new FormData(evn.target);\n      const credentials = {};\n\n      for (const key of data.keys()) {\n        credentials[key] = data.get(key);\n      }\n\n      console.log(credentials);\n      const req = await fetch(`${process.env.REACT_APP_API_URL}/api-token-auth/`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n\n      if (req.status === 200) {\n        const res = await req.json();\n        localStorage.setItem('token', res.token);\n        localStorage.setItem('user_id', res.id);\n        localStorage.setItem('username', res.username);\n        ReactDOM.render( /*#__PURE__*/_jsxDEV(ChatRoom, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 6\n        }, this), document.getElementById('root'));\n      } else if (req.status === 404) {\n        console.log('Error generating token', await req.json());\n        const error = root.current.querySelector(`.${styles.error}`);\n        error.innerHTML = 'Wrong user or password';\n        evn.target.reset();\n      } else {\n        console.log('User or password wrong');\n        const error = root.current.querySelector(`.${styles.error}`);\n        error.innerHTML = 'Wrong user or password';\n        evn.target.reset();\n      }\n    });\n  }\n\n}\nexport class Register extends Component {\n  constructor(props) {\n    super(props);\n    this.rootRef = /*#__PURE__*/React.createRef();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: this.rootRef,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: styles.form,\n        autoComplete: \"off\",\n        action: \"/register/\",\n        method: \"post\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Member Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: styles['form-control'],\n            name: \"username\",\n            id: \"username\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"Enter email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            id: \"emailHelp\",\n            className: [styles['form-text'], styles['text-muted']],\n            children: \"We'll never share your email with anyone else.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles['error']\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: styles['form-control'],\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['form-group'],\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: styles['form-control'],\n            name: \"confirm\",\n            id: \"confirm\",\n            placeholder: \"Confirm your Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles['link'],\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/\",\n            children: \"I have an account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 4\n    }, this);\n  }\n\n  componentDidMount() {\n    const root = this.rootRef.current;\n    root.querySelector('form').style.display = 'block';\n    const inputs = root.querySelectorAll('input');\n\n    for (const inp of inputs) {\n      inp.addEventListener('input', function () {\n        const err = root.querySelector(`.${styles.error}`);\n        err.innerHTML = '';\n      });\n    }\n\n    root.querySelector('form').addEventListener('submit', async function (evn) {\n      evn.preventDefault();\n      console.log('request for token');\n      const data = new FormData(evn.target);\n      const credentials = {};\n\n      for (const key of data.keys()) {\n        credentials[key] = data.get(key);\n      }\n\n      console.log(credentials);\n\n      if (credentials.password === credentials.confirm) {\n        const req = await fetch(`${process.env.REACT_APP_API_URL}/register/`, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(credentials)\n        });\n\n        if (req.status === 200) {\n          const res = await req.json();\n          localStorage.setItem('token', res.token);\n          localStorage.setItem('user_id', res.id);\n          localStorage.setItem('username', res.username);\n          ReactDOM.render( /*#__PURE__*/_jsxDEV(ChatRoom, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 7\n          }, this), document.getElementById('root'));\n        } else {\n          const err = document.querySelector(`.${styles.error}`);\n          err.innerHTML = 'Please try with another data';\n        }\n      } else {\n        const err = document.querySelector(`.${styles.error}`);\n        err.innerHTML = 'The passwords should match';\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/dan/Documents/prueba_useit/mini_chat_grupal/frontend/mini_chat/src/Login.js"],"names":["React","Component","ReactDOM","styles","ChatRoom","Login","constructor","props","rootRef","createRef","render","form","error","componentDidMount","console","log","root","inputs","current","querySelectorAll","inp","addEventListener","err","querySelector","innerHTML","linkToRegister","link","evn","preventDefault","document","getElementById","data","FormData","target","credentials","key","keys","get","req","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","status","res","json","localStorage","setItem","token","id","username","reset","Register","style","display","password","confirm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './Login.module.css';\nimport ChatRoom from './ChatRoom';\n\nexport default class Login extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.rootRef = React.createRef();\n\t}\n\trender () {\n\t\treturn(\n\t\t\t<div ref={ this.rootRef }>\n\t\t\t\t<form className={ styles.form } autoComplete=\"off\" action=\"/api-token-auth/\" method=\"post\">\n\t\t\t\t\t<h1>Member Login</h1>\n\t\t\t\t\t<h2 className={ styles.error }></h2>\n\t\t\t\t\t<div className={ styles['form-group'] }>\n\t\t\t\t\t\t<input type=\"text\" className={ styles['form-control'] } name=\"username\" id=\"username\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\"></input>\n\t\t\t\t\t\t<small id=\"emailHelp\" className={ [styles['form-text'], styles['text-muted']] }>We'll never share your email with anyone else.</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group'] }>\n\t\t\t\t\t<input type=\"password\" className={ styles['form-control'] } name=\"password\" id=\"password\" placeholder=\"Password\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group form-check'] }>\n\t\t\t\t\t\t<label className={ styles['form-check-label'] } htmlFor=\"exampleCheck1\">Check me out</label>\n\t\t\t\t\t\t<input type=\"checkbox\" className={ styles['form-check-input'] } id=\"exampleCheck1\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"submit\" className={ styles['btn btn-primary'] }>Submit</button>\n\t\t\t\t\t{/* <div className={ styles['link'] }>\n\t\t\t\t\t\t<a href=\"/login\">Forgot password</a>\n\t\t\t\t\t</div> */}\n\t\t\t\t\t<div className={ styles['link'] }>\n\t\t\t\t\t\t<a href=\"/register\">I don't have an account</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount () {\n\t\tconsole.log(styles.error);\n\t\tconst root = this.rootRef;\n\t\tconst inputs = root.current.querySelectorAll('input');\n\t\tfor (const inp of inputs) {\n\t\t\tinp.addEventListener('input', function () {\n\t\t\t\tconst err = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terr.innerHTML = '';\n\t\t\t});\n\t\t}\n\t\tconst linkToRegister = root.current.querySelector(`.${styles.link}`);\n\t\tlinkToRegister.addEventListener('click', function (evn) {\n\t\t\tevn.preventDefault();\n\t\t\tReactDOM.render(\n\t\t\t\t<Register></Register>,\n\t\t\t\tdocument.getElementById('root')\n\t\t\t)\n\t\t});\n\t\troot.current.querySelector('form').addEventListener('submit', async function (evn) {\n\t\t\tevn.preventDefault();\n\t\t\tconsole.log('request for token');\n\t\t\tconst data = new FormData(evn.target);\n\t\t\tconst credentials = {};\n\t\t\tfor (const key of data.keys()) {\n\t\t\t\tcredentials[key] = data.get(key);\n\t\t\t}\n\t\t\tconsole.log(credentials);\n\t\t\tconst req = await fetch(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/api-token-auth/`,\n\t\t\t\t{\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(credentials)\n\t\t\t\t}\n\t\t\t)\n\t\t\tif (req.status === 200) {\n\t\t\t\tconst res = await req.json();\n\t\t\t\tlocalStorage.setItem('token', res.token);\n\t\t\t\tlocalStorage.setItem('user_id', res.id);\n\t\t\t\tlocalStorage.setItem('username', res.username);\n\t\t\t\tReactDOM.render(\n\t\t\t\t\t<ChatRoom></ChatRoom>,\n\t\t\t\t\tdocument.getElementById('root')\n\t\t\t\t);\n\t\t\t} else if (req.status === 404) {\n\t\t\t\tconsole.log('Error generating token', await req.json());\n\t\t\t\tconst error = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terror.innerHTML = 'Wrong user or password';\n\t\t\t\tevn.target.reset();\n\t\t\t} else {\n\t\t\t\tconsole.log('User or password wrong');\n\t\t\t\tconst error = root.current.querySelector(`.${styles.error}`);\n\t\t\t\terror.innerHTML = 'Wrong user or password';\n\t\t\t\tevn.target.reset();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class Register extends Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.rootRef = React.createRef();\n\t}\n\trender () {\n\t\treturn(\n\t\t\t<div ref={this.rootRef}>\n\t\t\t\t<form className={ styles.form } autoComplete=\"off\" action=\"/register/\" method=\"post\">\n\t\t\t\t\t<h1>Member Register</h1>\n\t\t\t\t\t<div className={ styles.['form-group'] }>\n\t\t\t\t\t<input type=\"email\" className={ styles['form-control']} name=\"username\" id=\"username\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\"></input>\n\t\t\t\t\t<small id=\"emailHelp\" className={ [styles['form-text'], styles['text-muted']]} >We'll never share your email with anyone else.</small>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h2 className={ styles['error']}></h2>\n\t\t\t\t\t<div className={ styles['form-group']}>\n\t\t\t\t\t<input type=\"password\" className={ styles['form-control']} name=\"password\" id=\"password\" placeholder=\"Password\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={ styles['form-group']}>\n\t\t\t\t\t\t<input type=\"password\" className={ styles['form-control']} name=\"confirm\" id=\"confirm\" placeholder=\"Confirm your Password\"></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"submit\">Submit</button>\n\t\t\t\t\t<div className={ styles['link']}>\n\t\t\t\t\t\t<a href=\"/\">I have an account</a>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n\tcomponentDidMount () {\n\t\tconst root = this.rootRef.current;\n\t\troot.querySelector('form').style.display = 'block';\n\t\tconst inputs = root.querySelectorAll('input');\n\t\tfor (const inp of inputs) {\n\t\t\tinp.addEventListener('input', function () {\n\t\t\t\tconst err = root.querySelector(`.${styles.error}`);\n\t\t\t\terr.innerHTML = '';\n\t\t\t});\n\t\t}\n\t\troot.querySelector('form').addEventListener('submit', async function (evn) {\n\t\t\tevn.preventDefault();\n\t\t\tconsole.log('request for token');\n\t\t\tconst data = new FormData(evn.target);\n\t\t\tconst credentials = {};\n\t\t\tfor (const key of data.keys()) {\n\t\t\t\tcredentials[key] = data.get(key);\n\t\t\t}\n\t\t\tconsole.log(credentials);\n\t\t\tif (credentials.password === credentials.confirm) {\n\t\t\t\tconst req = await fetch(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/register/`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbody: JSON.stringify(credentials)\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tif (req.status === 200) {\n\t\t\t\t\tconst res = await req.json();\n\t\t\t\t\tlocalStorage.setItem('token', res.token);\n\t\t\t\t\tlocalStorage.setItem('user_id', res.id);\n\t\t\t\t\tlocalStorage.setItem('username', res.username);\n\t\t\t\t\tReactDOM.render(\n\t\t\t\t\t\t<ChatRoom></ChatRoom>,\n\t\t\t\t\t\tdocument.getElementById('root')\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconst err = document.querySelector(`.${styles.error}`);\n\t\t\t\t\terr.innerHTML = 'Please try with another data';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst err = document.querySelector(`.${styles.error}`);\n\t\t\t\terr.innerHTML = 'The passwords should match';\n\t\t\t}\n\t\t});\n\t}\n}"]},"metadata":{},"sourceType":"module"}